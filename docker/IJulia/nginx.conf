worker_processes  2;
error_log logs/error.log warn;

events {
    worker_connections 128;
}


http {
  server {
        listen 8000;
        default_type 'text/html';
        root / ;

        location = /upload {
            content_by_lua_file lua/upload.lua;
        }

        location /shellinabox {
            access_log off;
            proxy_pass http://127.0.0.1:4200/;
        }        
        
        location = /hostipnbupl/ {
            content_by_lua '
                dofile(ngx.config.prefix() .. "lua/contutils.lua")
                writeout_uplpage()
            ';
        }

        location /home/juser {
            include    mime.types;
            fancyindex  on;
            fancyindex_exact_size off;
            fancyindex_css_href "//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css";
        }        
    }
}






